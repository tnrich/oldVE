<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">function loadFile(inElm, outElm) {
	var input, file, fr;
	if (typeof window.FileReader !== 'function') {
		outElm.value = &quot;The file API isn't supported on this browser yet.&quot;;
		//bodyAppend(&quot;p&quot;, &quot;The file API isn't supported on this browser yet.&quot;);
		return;
	}
	//input = document.getElementById('fileinput');
	input = inElm;
	if (!input) {
		outElm.value = &quot;Um, couldn't find the fileinput element.&quot;;
		//bodyAppend(&quot;p&quot;, &quot;Um, couldn't find the fileinput element.&quot;);
	}
	else if (!input.files) {
		outElm.value = &quot;This browser doesn't seem to support the `files` property of file inputs.&quot;;
		//bodyAppend(&quot;p&quot;, &quot;This browser doesn't seem to support the `files` property of file inputs.&quot;);
	}
	else if (!input.files[0]) {
		outElm.value = &quot;Please select a file before clicking 'Load'&quot;;
		//bodyAppend(&quot;p&quot;, &quot;Please select a file before clicking 'Load'&quot;);
	}
	else {
		file = input.files[0];
		fr = new FileReader;
		fr.onload = showText;

		fr.readAsText(file);
	}
	
	function showText() {
		var markup, result, n, aByte, byteStr;
		markup = [];
		result = fr.result;
		outElm.value = result;
		
		//console.log(outElm.value);
		for (n=0; n&lt;result.length; ++n) {
			aByte = result.charCodeAt(n);
			byteStr = aByte.toString(16);
			if (byteStr.length &lt; 2) {byteStr = &quot;0&quot; + byteStr;}
			markup.push(byteStr);
		}
		//bodyAppend(&quot;p&quot;, &quot;The encoded text representation (length = &quot; + result.length + &quot;):&quot;);
		//bodyAppend(&quot;pre&quot;, markup.join(&quot; &quot;));
		//bodyAppend(&quot;p&quot;, &quot;The text:&quot;);
		//bodyAppend(&quot;pre&quot;, result);
		//document.gentestFile.otxt1.value = result;
		
	}
}


/*
function bodyAppend(tagName, innerHTML) {
	var elm;
	elm = document.createElement(tagName);
	elm.innerHTML = innerHTML;
	document.body.appendChild(elm);
}
*/

</pre>
</body>
</html>
